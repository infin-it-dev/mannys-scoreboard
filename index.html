<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scoreboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: black;
            color: white;
        }
        .scoreboard {
            display: flex;
            justify-content: center;
            gap: 50px;
            font-size: 3rem;
            margin-top: 50px;
        }
        .team {
            min-width: 200px;
        }
        .quarter {
            margin-top: 20px;
            font-size: 2rem;
        }
    </style>
    <script>
        function updateScoreboard() {
            document.getElementById('team1Name').textContent = localStorage.getItem('team1Name') || 'Team 1';
            document.getElementById('team2Name').textContent = localStorage.getItem('team2Name') || 'Team 2';
            document.getElementById('score1').textContent = localStorage.getItem('score1') || '0';
            document.getElementById('score2').textContent = localStorage.getItem('score2') || '0';
            document.getElementById('quarter').textContent = 'Q' + (localStorage.getItem('quarter') || '1');
        }

        // Automatically update when localStorage changes
        window.addEventListener("storage", updateScoreboard);

        function openControlPanel() {
            let controlWindow = window.open("", "Control Panel", "width=400,height=400");

            let controlHTML = `
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Control Panel</title>
                    <style>
                        body { font-family: Arial, sans-serif; text-align: center; }
                        .controls { display: flex; flex-direction: column; gap: 10px; padding: 20px; }
                        .score-controls { display: flex; justify-content: center; gap: 10px; align-items: center; }
                        button { font-size: 1.2rem; padding: 5px 10px; cursor: pointer; }
                        .reset-btn { background-color: red; color: white; }
                    </style>
                </head>
                <body>
                    <div class="controls">
                        <label>Team 1 Name: <input id="team1Input" type="text"></label>
                        <label>Team 2 Name: <input id="team2Input" type="text"></label>
                        <button id="updateButton">Update Names</button>
                    </div>

                    <div class="score-controls">
                        <button onclick="updateScore('score1', -1)">➖</button>
                        <span id="score1Display">0</span>
                        <button onclick="updateScore('score1', 1)">➕</button>
                    </div>

                    <div class="score-controls">
                        <button onclick="updateScore('score2', -1)">➖</button>
                        <span id="score2Display">0</span>
                        <button onclick="updateScore('score2', 1)">➕</button>
                    </div>

                    <label>Quarter:
                        <button onclick="updateQuarter(-1)">⬅️</button>
                        <span id="quarterDisplay">1</span>
                        <button onclick="updateQuarter(1)">➡️</button>
                    </label>

                    <button id="resetButton" class="reset-btn">Reset</button>

                    <script>
                        function loadExistingValues() {
                            document.getElementById("team1Input").value = localStorage.getItem('team1Name') || 'Team 1';
                            document.getElementById("team2Input").value = localStorage.getItem('team2Name') || 'Team 2';
                            document.getElementById("score1Display").textContent = localStorage.getItem('score1') || '0';
                            document.getElementById("score2Display").textContent = localStorage.getItem('score2') || '0';
                            document.getElementById("quarterDisplay").textContent = localStorage.getItem('quarter') || '1';
                        }

                        function updateScore(scoreKey, amount) {
                            let newScore = (parseInt(localStorage.getItem(scoreKey) || '0')) + amount;
                            if (newScore < 0) newScore = 0;
                            localStorage.setItem(scoreKey, newScore);
                            document.getElementById(scoreKey + "Display").textContent = newScore;
                            window.dispatchEvent(new Event('storage')); // Notify main page
                        }

                        function updateQuarter(amount) {
                            let newQuarter = (parseInt(localStorage.getItem('quarter') || '1')) + amount;
                            if (newQuarter < 1) newQuarter = 1;
                            localStorage.setItem('quarter', newQuarter);
                            document.getElementById("quarterDisplay").textContent = newQuarter;
                            window.dispatchEvent(new Event('storage')); // Notify main page
                        }

                        document.getElementById("updateButton").addEventListener("click", function() {
                            localStorage.setItem('team1Name', document.getElementById('team1Input').value);
                            localStorage.setItem('team2Name', document.getElementById('team2Input').value);
                            window.dispatchEvent(new Event('storage')); // Notify main page
                        });

                        document.getElementById("resetButton").addEventListener("click", function() {
                            localStorage.setItem('score1', '0');
                            localStorage.setItem('score2', '0');
                            localStorage.setItem('quarter', '1');
                            document.getElementById("score1Display").textContent = '0';
                            document.getElementById("score2Display").textContent = '0';
                            document.getElementById("quarterDisplay").textContent = '1';
                            window.dispatchEvent(new Event('storage')); // Notify main page
                        });

                        window.onload = loadExistingValues;
                    <\/script>
                </body>
                </html>
            `;

            controlWindow.document.open();
            controlWindow.document.write(controlHTML);
            controlWindow.document.close();
        }

        window.onload = updateScoreboard;
    </script>
</head>
<body>
    <button onclick="openControlPanel()">Open Control Panel</button>
    <div class="scoreboard">
        <div class="team">
            <div id="team1Name">Team 1</div>
            <div id="score1">0</div>
        </div>
        <div class="quarter" id="quarter">Q1</div>
        <div class="team">
            <div id="team2Name">Team 2</div>
            <div id="score2">0</div>
        </div>
    </div>
</body>
</html>
